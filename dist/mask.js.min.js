/*!
 * angular-ui-mask
 * https://github.com/angular-ui/ui-mask
 * Version: 1.4.1 - 2015-08-06T20:39:41.213Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(e,n){function t(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var i=e;return function(e,r,u,a){function o(e){return angular.isDefined(e)?(k(e),H?(h(),d(),!0):f()):f()}function l(e){angular.isDefined(e)&&(P=e,H&&M({},!0))}function s(e){return H?(j=v(e||""),T=p(j),a.$setValidity("mask",T),T&&j.length?m(j):void 0):e}function c(e){return H?(j=v(e||""),T=p(j),a.$viewValue=j.length?m(j):"",a.$setValidity("mask",T),""===j&&u.required&&a.$setValidity("required",!a.$error.required),T?j:void 0):e}function f(){return H=!1,g(),angular.isDefined(K)?r.attr("placeholder",K):r.removeAttr("placeholder"),angular.isDefined(N)?r.attr("maxlength",N):r.removeAttr("maxlength"),r.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function h(){j=B=v(a.$modelValue||""),z=Z=m(j),T=p(j);var e=T&&j.length?z:"";u.maxlength&&r.attr("maxlength",2*E[E.length-1]),angular.isDefined(u.uiMaskPlaceholder)||r.attr("placeholder",P),r.val(e),a.$viewValue=e,a.$setValidity("mask",T)}function d(){I||(r.bind("blur",y),r.bind("mousedown mouseup",V),r.bind("input keyup click focus",M),r.bind("paste",x),I=!0)}function g(){I&&(r.unbind("blur",y),r.unbind("mousedown",V),r.unbind("mouseup",V),r.unbind("input",M),r.unbind("keyup",M),r.unbind("click",M),r.unbind("focus",M),r.unbind("paste",x),I=!1)}function p(e){return e.length?e.length>=q:!0}function v(e){var n="",t=_.slice();return e=e.toString(),angular.forEach(R,function(n){e=e.replace(n,"")}),angular.forEach(e.split(""),function(e){t.length&&t[0].test(e)&&(n+=e,t.shift())}),n}function m(e){var n="",t=E.slice();return angular.forEach(P.split(""),function(i,r){e.length&&r===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=i}),n}function b(e){var n=angular.isDefined(u.uiMaskPlaceholder)?u.uiMaskPlaceholder:u.placeholder;return"undefined"!=typeof n&&n[e]?n[e]:"_"}function $(){return P.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function k(e){var n=0;if(E=[],_=[],P="","string"==typeof e){q=0;var t=!1,i=0,r=e.split("");angular.forEach(r,function(e,r){W.maskDefinitions[e]?(E.push(n),P+=b(r-i),_.push(W.maskDefinitions[e]),n++,t||q++):"?"===e?(t=!0,i++):(P+=e,n++)})}E.push(E.slice().pop()+1),R=$(),H=E.length>1?!0:!1}function y(){W.clearOnBlur&&(C=0,F=0,T&&0!==j.length||(z="",r.val(""),e.$apply(function(){a.$setViewValue("")})))}function V(e){"mousedown"===e.type?r.bind("mouseout",w):r.unbind("mouseout",w)}function w(){F=S(this),r.unbind("mouseout",w)}function x(){D(this,r.val().length)}function M(e,n){e=e||{};var t=e.which,i=e.type;if(16!==t&&91!==t){var u,o=r.val(),l=Z,s=v(o),c=B,f=A(this)||0,h=C||0,d=f-h,g=E[0],p=E[s.length]||E.slice().shift(),b=F||0,$=S(this)>0,k=b>0,y=o.length>l.length||b&&o.length>l.length-b,V=o.length<l.length||b&&o.length===l.length-b,w=t>=37&&40>=t&&e.shiftKey,x=37===t,M=8===t||"keyup"!==i&&V&&-1===d,_=46===t||"keyup"!==i&&V&&0===d&&!k,P=(x||M||"click"===i)&&f>g;if(F=S(this),!w&&(!$||"click"!==i&&"keyup"!==i)){if("input"===i&&V&&!k&&s===c){for(;M&&f>g&&!O(f);)f--;for(;_&&p>f&&-1===E.indexOf(f);)f++;var R=E.indexOf(f);s=s.substring(0,R)+s.substring(R+1)}for(u=m(s),Z=u,B=s,r.val(u),n?a.$viewValue=s:a.$setViewValue(s),y&&g>=f&&(f=g+1),P&&f--,f=f>p?p:g>f?g:f;!O(f)&&f>g&&p>f;)f+=P?-1:1;(P&&p>f||y&&!O(h))&&f++,C=f,D(this,f)}}}function O(e){return E.indexOf(e)>-1}function A(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&t(r[0])){e.focus();var n=document.selection.createRange();return n.moveStart("character",e.value?-e.value.length:0),n.text.length}return 0}function D(e,n){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)t(r[0])&&(e.focus(),e.setSelectionRange(n,n));else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}}function S(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var E,_,P,R,q,j,z,T,Z,B,C,F,H=!1,I=!1,K=u.placeholder,N=u.maxlength,W={};u.uiOptions?(W=e.$eval("["+u.uiOptions+"]"),angular.isObject(W[0])&&(W=function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.extend(n[t],e[t]));return n}(i,W[0]))):W=i,u.$observe("uiMask",o),angular.isDefined(u.uiMaskPlaceholder)?u.$observe("uiMaskPlaceholder",l):u.$observe("placeholder",l);var G=!1;u.$observe("modelViewValue",function(e){"true"===e&&(G=!0)}),e.$watch(u.ngModel,function(t){if(G&&t){var i=n(u.ngModel);i.assign(e,a.$viewValue)}}),a.$formatters.push(s),a.$parsers.push(c),r.bind("mousedown mouseup",V),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&1/0!==i&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=t)return-1;for(var r=i>=0?i:Math.max(t-Math.abs(i),0);t>r;r++)if(r in n&&n[r]===e)return r;return-1})}}}}])}();